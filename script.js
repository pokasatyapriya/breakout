const canvas=document.getElementById('gameCanvas');const ctx=canvas.getContext('2d');const startBtn=document.getElementById('startBtn');const pauseBtn=document.getElementById('pauseBtn');const scoreLabel=document.getElementById('scoreLabel');const livesLabel=document.getElementById('livesLabel');let ball,paddle,bricks;let score=0;let lives=3;let running=false;let paused=false;const ROWS=5;const COLS=8;const BRICK_W=50;const BRICK_H=20;const BRICK_PADDING=10;const OFFSET_TOP=40;const OFFSET_LEFT=35;function createBall(){return{x:canvas.width/2,y:canvas.height-30,dx:3*(Math.random()>0.5?1:-1),dy:-3,radius:8,color:getCSSVar('--ball')}}function createPaddle(){return{width:75,height:10,x:(canvas.width-75)/2,color:getCSSVar('--paddle')}}function createBricks(){const arr=[];for(let c=0;c<COLS;c++){arr[c]=[];for(let r=0;r<ROWS;r++){arr[c][r]={x:0,y:0,status:1,color:getCSSVar('--brick')}}}return arr}function getCSSVar(name){return getComputedStyle(document.documentElement).getPropertyValue(name)}function drawBall(){ctx.beginPath();ctx.arc(ball.x,ball.y,ball.radius,0,Math.PI*2);ctx.fillStyle=ball.color;ctx.fill();ctx.closePath()}function drawPaddle(){ctx.beginPath();ctx.rect(paddle.x,canvas.height-paddle.height-10,paddle.width,paddle.height);ctx.fillStyle=paddle.color;ctx.fill();ctx.closePath()}function drawBricks(){for(let c=0;c<COLS;c++){for(let r=0;r<ROWS;r++){if(bricks[c][r].status==1){const brickX=c*(BRICK_W+BRICK_PADDING)+OFFSET_LEFT;const brickY=r*(BRICK_H+BRICK_PADDING)+OFFSET_TOP;bricks[c][r].x=brickX;bricks[c][r].y=brickY;ctx.beginPath();ctx.rect(brickX,brickY,BRICK_W,BRICK_H);ctx.fillStyle=bricks[c][r].color;ctx.fill();ctx.closePath()}}}}function drawScore(){scoreLabel.textContent=`Score: ${score}`}function drawLives(){livesLabel.textContent=`Lives: ${lives}`}function draw(){ctx.clearRect(0,0,canvas.width,canvas.height);drawBricks();drawBall();drawPaddle()}function update(){if(!running||paused)return;ball.x+=ball.dx;ball.y+=ball.dy;if(ball.x+ball.dx>canvas.width-ball.radius||ball.x+ball.dx<ball.radius)ball.dx=-ball.dx;if(ball.y+ball.dy<ball.radius)ball.dy=-ball.dy;else if(ball.y+ball.dy>canvas.height-ball.radius-paddle.height-10){if(ball.x>paddle.x&&ball.x<paddle.x+paddle.width){ball.dy=-ball.dy}else if(ball.y+ball.dy>canvas.height-ball.radius){lives--;drawLives();if(!lives){gameOver(false);return}else{resetBallAndPaddle()}}}for(let c=0;c<COLS;c++){for(let r=0;r<ROWS;r++){const b=bricks[c][r];if(b.status==1){if(ball.x>b.x&&ball.x<b.x+BRICK_W&&ball.y>b.y&&ball.y<b.y+BRICK_H){ball.dy=-ball.dy;b.status=0;score++;drawScore();if(score===ROWS*COLS)gameOver(true)}}}}draw()}function loop(){update();if(running&&!paused)requestAnimationFrame(loop)}function resetBallAndPaddle(){ball=createBall();paddle.x=(canvas.width-paddle.width)/2}document.addEventListener('keydown',(e)=>{if(e.key==='ArrowRight')paddle.x+=15;if(e.key==='ArrowLeft')paddle.x-=15});document.addEventListener('mousemove',(e)=>{const rect=canvas.getBoundingClientRect();const mouseX=e.clientX-rect.left;paddle.x=mouseX-paddle.width/2});startBtn.addEventListener('click',startGame);pauseBtn.addEventListener('click',togglePause);function startGame(){ball=createBall();paddle=createPaddle();bricks=createBricks();score=0;lives=3;running=true;paused=false;drawScore();drawLives();loop()}function togglePause(){if(!running)return;paused=!paused;if(!paused)loop()}function gameOver(won){running=false;ctx.font='20px Inter';ctx.fillStyle='white';ctx.textAlign='center';ctx.fillText(won?'You Won! ðŸŽ‰':'Game Over ðŸ’€',canvas.width/2,canvas.height/2)}
